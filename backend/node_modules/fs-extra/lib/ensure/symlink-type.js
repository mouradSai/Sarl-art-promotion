<<<<<<< HEAD
var fs = require('graceful-fs')

function symlinkType (srcpath, type, callback) {
  callback = (typeof type === 'function') ? type : callback
  type = (typeof type === 'function') ? false : type
  if (type) return callback(null, type)
  fs.lstat(srcpath, function (err, stats) {
    if (err) return callback(null, 'file')
    type = (stats && stats.isDirectory()) ? 'dir' : 'file'
    callback(null, type)
  })
=======
'use strict'

const fs = require('../fs')
const u = require('universalify').fromPromise

async function symlinkType (srcpath, type) {
  if (type) return type

  let stats
  try {
    stats = await fs.lstat(srcpath)
  } catch {
    return 'file'
  }

  return (stats && stats.isDirectory()) ? 'dir' : 'file'
>>>>>>> 7736c28199741713fb247a9beed5ba8f2b75bd9c
}

function symlinkTypeSync (srcpath, type) {
  if (type) return type
<<<<<<< HEAD
  try {
    var stats = fs.lstatSync(srcpath)
  } catch (e) {
=======

  let stats
  try {
    stats = fs.lstatSync(srcpath)
  } catch {
>>>>>>> 7736c28199741713fb247a9beed5ba8f2b75bd9c
    return 'file'
  }
  return (stats && stats.isDirectory()) ? 'dir' : 'file'
}

module.exports = {
<<<<<<< HEAD
  symlinkType: symlinkType,
  symlinkTypeSync: symlinkTypeSync
=======
  symlinkType: u(symlinkType),
  symlinkTypeSync
>>>>>>> 7736c28199741713fb247a9beed5ba8f2b75bd9c
}
